<image mode='widthFix' wx:if='{{ programGroup }}'
  src="{{ resUrl + 'img/pg/' + programGroup.id + '/' + programGroup.weapp_cover_image }}"
  class='program-group-cover-image'>
</image>

<view class='program-details'>

  <view class='program-details-name-date'>

    <view class='program-name'>{{ programGroup.weapp_display_name }}</view>

    <view class='program-dates'>
      {{ program.formattedStartDate }}-{{ program.formattedEndDate }}
    </view>
  
  </view>

  <view>
  
    <view class='program-details-price'>    
      {{ selectedPrice ? selectedPrice.price : program.minPrice  + '-' + program.maxPrice }}元
    </view>

  </view>

  <view class="select-price-warning-container {{ selectPriceWarningVisible ? 'warning-visible' : '' }}">
    <view class="select-price-warning-alert has-error">
      <text class="fas fa-exclamation-triangle text-danger"></text> 使用此警告以上的按钮选择套餐
    </view>
  </view>

</view>

<view class='program-prices'>

  <view wx:for='{{ program.prices }}' wx:key='id' wx:for-item='price' 
    class='program-price-container {{ selectedPrice && selectedPrice.id === price.id ? "selected-price" : ""}}' 
    bindtap='selectPrice' data-id='{{ price.id }}'>
  
      {{ price.adults ? price.adults + '大' : '' }}{{ price.kids }}小

  </view>

</view>

<view class='program-refund-description-container'>
  <text class="refund-description-header">退款说明</text>
  <rich-text nodes='{{ programGroup.arraywar }}'></rich-text>
</view>

<view class='payment-details'>

  <view>要支付: {{ amountDue }}元 </view>

  <view class='proceed-payment-button-container'>
    <button bindtap='handlePaymentClick' type='primary'>
      {{ selectedPrice ? '支付' : '选择套餐' }}
    </button>
  </view>

</view>

<!-- contactInfoModal -->
<view class="modal-mask" bindtap="hideContactInfoModal" 
  catchtouchmove="preventTouchMove" wx:if="{{ contactInfoModalVisible }}">
</view>

<view class="modal-dialog" wx:if="{{ contactInfoModalVisible }}">

  <view class="modal-title">请注意!</view>

  <view class="modal-content">

    <view>您的联系信息可能不正确，请检查并根据需要进行更新。</view>

    <view class="field">
      <text class="highlight">联系电话:</text>
      <text>{{ accountInfo.phone || '暂无信息' }}</text>
    </view>

    <view class="field">
      <text class="highlight">微信编号:</text>
      <text>{{ accountInfo.wechat || '暂无信息' }}</text>
    </view>

    <view>如果您继续付款，之后我们可能无法与您联系。</view>

  </view>

  <view class="modal-footer">

    <view class="btn-cancel" bindtap="proceedWithPayment" data-status="cancel">我明白</view>
    <view class="btn-confirm" bindtap="updateContactInfo" data-status="confirm">更新信息</view>

  </view>

</view>

